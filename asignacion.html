<!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Baloo+Tamma+2:wght@400;500;600;700;800&family=PT+Mono&display=swap" rel="stylesheet">

        <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css"/>
      <!-- Default theme -->
      <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/default.min.css"/>
      <!-- Semantic UI theme -->
      <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/semantic.min.css"/>
      <!-- Bootstrap theme -->
      <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/bootstrap.min.css"/>

        <!-- Vendor CSS Files -->
        <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

        <link href="assets/vendor/icofont/icofont.min.css" rel="stylesheet">
        <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
        <link href="assets/vendor/owl.carousel/assets/owl.carousel.min.css" rel="stylesheet">
        <link href="assets/vendor/venobox/venobox.css" rel="stylesheet">
        <link href="assets/vendor/aos/aos.css" rel="stylesheet">
        <link href="assets/vendor/bootstrap/css/bootstrap-select.css" rel="stylesheet">

        <!--========== BOX ICONS ==========-->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">

        <!--========== CSS ==========-->
        <link rel="stylesheet" href="assets/css/style.css">
        <!-- Favicons -->
        <link href="assets/img/favicon.png" rel="icon">
        <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">
        <title>Principal</title>
    </head>
    <body>
        <!--========== HEADER ==========-->
        <header class="header">
                   <div class="header__container">
                     <a class="header__logo">  <img src="assets/img/Logo USAC SUNcolor.png" alt="" class="header__img2"></a>

                     <div class="header__img" id="datosHeader">

                     </div>


                       <div class="header__toggle">
                           <i class='bx bx-menu' id="header-toggle"></i>
                       </div>
                   </div>
               </header>

        <!--========== NAV ==========-->
        <div class="nav" id="navbar">
            <nav class="nav__container">
                <div>
                  <a href="#" class="header__logo__inverso">  <img src="assets/img/Logo USAC SUNcolor.png" alt="" class="header__img2"><br><br> </a>

                  <div class="nav__list" id="menuAE">

                  </div>
                </div>

                <a href="index.html" class="nav__link nav__logout" id="cerrarSesion">
                    <i class='bx bx-log-out nav__icon' ></i>
                    <span class="nav__name">Cerrar Sesión</span>
                </a>
            </nav>
        </div>

        <!--========== CONTENTS ==========-->
        <main class="contenedor">
          <section id="features" class="featres">
            <div class="container">

        <div class="text-center mb-4" data-aos="fade-up">


                <div class="section-title">
                  <h2>Asignación</h2>
                </div>
                <div class="" id="datosResultados">

                </div>
                <div class="" id="activo">
                </div>
                <br>

                <div class="text-center"  style="text-align: center;" id="selCentros" style="">
                  <label for="">Selecciona el centro </label>
                  <select id="selbox" onchange="facultades(this)" data-live-search="true" data-live-search-style="startsWith"  class="selectpicker">

                  </select>

                </div>

                <div class="text-center"  style="text-align: center;" id="selFacultades">
                  <label for="">Selecciona la Facultad/Escuela </label>
                  <select id="selFacultad"  data-live-search="true" data-live-search-style="startsWith"  class="selectpicker">

                  </select>

                </div>

                      <div class="" id="visorPDF" style="width: auto; height: 650px;">
                      </div>
                <br>

                <div class="" id="btnAsignar">


                </div>


        </div>

            </div>
          </section><!-- End App Features Section -->

        </main>



        <!--========== MAIN JS ==========-->
        <script src="assets/vendor/jquery/jquery.min.js"></script>
        <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
        <script src="assets/vendor/jquery.easing/jquery.easing.min.js"></script>
        <script src="assets/vendor/php-email-form/validate.js"></script>
        <script src="assets/vendor/owl.carousel/owl.carousel.min.js"></script>
        <script src="assets/vendor/venobox/venobox.min.js"></script>
        <script src="assets/vendor/aos/aos.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.6/jspdf.plugin.autotable.min.js"></script>



        <script src="assets/js/cookie.js"></script>
        <script src="assets/js/base.js"></script>
        <script src="assets/js/asignacion.js"></script>
        <script src="assets/js/main.js"></script>

        <script type="text/javascript">
        $.ajax({
            type: 'GET',
            url:  dominio + "buscarCentroActivo/1",
            contentType: "application/json",
            dataType: 'json',
            async: false,
            success: function (data) {
          //  console.log(data);

            html = "";
            const $select = document.querySelector("#selbox");

          //  html += '<label for="">Selecciona Centro: </label>';
            //html +=  '<select data-live-search="true" data-live-search-style="startsWith"  class="selectpicker">';
            var option = document.createElement('option');
            option.text = 'Selecciona Centro Universitario';
            option.value = 0;
            $select.appendChild(option);

            for(i=0; i<data.centros.length; i++){
               option = document.createElement('option');
              //console.log(option.text = data.centros[i].nombre);
              //html += '<option value="'+data.centros[i].id+'">'+data.centros[i].nombre+'</option>';
              option.value = data.centros[i].id;
              option.text = data.centros[i].nombre;
              $select.appendChild(option);
            }

          //  html += '</select>';
          //  $("#selbox").html(html);

          ///////sleector de inicio

          idCentro = $("#selbox").val();
         $.ajax({
              type: 'GET',
              url:  dominio + "buscarFacultadActiva/" + idCentro + "/1",
              contentType: "application/json",
              dataType: 'json',
              async: false,
              success: function (data) {
              //console.log(data);

            // html = "";
              const selectFacultad = document.querySelector("#selFacultad");
              var option = document.createElement('option');
              option.text = 'Selecciona Unidad Académica';
              option.value = 0;
              selectFacultad.appendChild(option);
              for(i=0; i<data.facultad.length; i++){

                //console.log(option.text = data.facultad[i].nombre);
                //html += '<option value="'+data.centros[i].id+'">'+data.centros[i].nombre+'</option>';
                option.value = data.facultad[i].id_facultad;
                option.text = data.facultad[i].nombre;
                selectFacultad.appendChild(option);
              }

            },
            error: function (response) {
              alertify.set('notifier','position', 'bottom-center');
              alertify.error("Usuario o Contraseña Incorrecto!");
                }

                });
          //////////////

          },
          error: function (response) {
            alertify.set('notifier','position', 'bottom-center');
            alertify.error("Usuario o Contraseña Incorrecto!");
              }
        });
        </script>

        <script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>
        <script src="assets/vendor/bootstrap/js/bootstrap-select.js?updated=1234567890"></script>
        <script src="https://unpkg.com/pdfobject@2.2.7/pdfobject.min.js"></script>
    </body>
</html>
